(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){e.exports=t(42)},42:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),c=t(17),r=t.n(c),l=(t(8),t(6)),u=t(18),i=t(19),m=t(2),s=function(e){var n=e.displayFiltered;return o.a.createElement("ul",null,n)},d=function(e){var n=e.value,t=e.handler,a=e.label;return o.a.createElement("p",null,a,": ",o.a.createElement("input",{value:n,onChange:t}))},f=function(e){var n=e.handleSubmit,t=e.newName,a=e.handleInput,c=e.newNumber,r=e.handleNumber;return o.a.createElement("form",{onSubmit:n},o.a.createElement("div",null,o.a.createElement(d,{value:t,handler:a,label:"name"}),o.a.createElement(d,{value:c,handler:r,label:"number"})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},h=function(e){var n=e.handleSearch;return o.a.createElement("span",null,"Find",o.a.createElement("input",{onChange:n}))},b=t(5),p=t.n(b),v="https://protected-bayou-84240.herokuapp.com/api/persons",E=function(){return p.a.get(v).then((function(e){return e.data}))},g=function(e){return p.a.post(v,e).then((function(e){return e.data}))},w=function(e){return p.a.delete("".concat(v,"/").concat(e))},j=function(e,n){return p.a.put("".concat(v,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){var n=e.message;return""===n?o.a.createElement(o.a.Fragment,null):null===n?null:n.includes("failed")?o.a.createElement("p",{className:"fail"},n):o.a.createElement("p",{className:"success"},n)},y=function(){Object(a.useEffect)((function(){console.log("effect"),E().then((function(e){console.log("promised fulfilled"),c(e)}))}),[]);var e=Object(a.useState)([]),n=Object(m.a)(e,2),t=n[0],c=n[1],r=Object(a.useState)(""),d=Object(m.a)(r,2),b=d[0],p=d[1],v=Object(a.useState)(""),y=Object(m.a)(v,2),k=y[0],S=y[1],N=Object(a.useState)(Object(i.a)(t)),C=Object(m.a)(N,2),F=C[0],T=C[1],I=Object(a.useState)(""),x=Object(m.a)(I,2),B=x[0],D=x[1],J=Object(a.useState)(""),L=Object(m.a)(J,2),W=L[0],A=L[1],M=Object(a.useState)(""),P=Object(m.a)(M,2),$=P[0],q=P[1],z=(""===B?t:F).map((function(e){return o.a.createElement("li",{className:"pudding",key:e.id},e.name," ",e.number,o.a.createElement("button",{type:"click",onClick:function(){return G(e.id)}},"remove"))})),G=function(e){var n=window.confirm("Are you sure you wish to delete your work of art?"),a=t.find((function(n){return n.id===e}));n?w(e).then((function(n){console.log("success: ",n),q("".concat(a.name," deleted")),setTimeout((function(){q(null)}),3e3),c(t.filter((function(n){return n.id!==e})))})).catch((function(e){return console.log("Failed to delete ".concat(a))})):console.log("no changes made")};return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(O,{message:$}),o.a.createElement(O,{message:W}),o.a.createElement(h,{handleSearch:function(e){D(e.target.value);var n=t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())}));T(n)}}),o.a.createElement("h2",null,"New entry"),o.a.createElement(f,{handleSubmit:function(e){e.preventDefault();var n,a=!1,o=!1,r=!1,i=Object(u.a)(t);try{for(i.s();!(n=i.n()).done;){var m=n.value;b===m.name&&m.number!==k?(a=!0,r=window.confirm("".concat(m.name," already exist in the phonebook. Change its phone number?"))):b===m.name&&(o=!0)}}catch(f){i.e(f)}finally{i.f()}if(a)if(r){var s=t.find((function(e){return e.name===b})),d=Object(l.a)(Object(l.a)({},s),{},{number:k});j(s.id,d).then((function(e){c(t.map((function(e){return e.name===s.name?d:e})))})).catch((function(e){A("".concat(s.name," is not part of the server!")),setTimeout((function(){A(null)}),3e3)}))}else console.log("No changes will be made to the phone number");else if(o)alert("".concat(b," has already been added")),console.log("Duplicate entry");else{g({name:b,number:k}).then((function(e){c(t.concat(e)),q("".concat(e.name," added")),setTimeout((function(){q(null)}),3e3)})).catch((function(e){var n=e.response.data.error;console.log("error: ",n),A(n),setTimeout((function(){A(null)}),3e3)})),p(""),S("")}},newName:b,handleInput:function(e){p(e.target.value)},newNumber:k,handleNumber:function(e){S(e.target.value)}}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(s,{displayFiltered:z}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,n,t){}},[[20,1,2]]]);
//# sourceMappingURL=main.120a65f8.chunk.js.map