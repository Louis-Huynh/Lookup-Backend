(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{20:function(e,n,t){e.exports=t(42)},42:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),c=t(17),o=t.n(c),l=(t(8),t(6)),u=t(18),i=t(19),m=t(2),s=function(e){var n=e.displayFiltered;return r.a.createElement("ul",null,n)},f=function(e){var n=e.value,t=e.handler,a=e.label;return r.a.createElement("p",null,a,": ",r.a.createElement("input",{value:n,onChange:t}))},d=function(e){var n=e.handleSubmit,t=e.newName,a=e.handleInput,c=e.newNumber,o=e.handleNumber;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,r.a.createElement(f,{value:t,handler:a,label:"name"}),r.a.createElement(f,{value:c,handler:o,label:"number"})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},h=function(e){var n=e.handleSearch;return r.a.createElement("span",null,"Find",r.a.createElement("input",{onChange:n}))},b=t(5),p=t.n(b),v="http://localhost:3001/api/persons",E=function(){return p.a.get(v).then((function(e){return e.data}))},g=function(e){return p.a.post(v,e).then((function(e){return e.data}))},w=function(e){return p.a.delete("".concat(v,"/").concat(e))},j=function(e,n){return p.a.put("".concat(v,"/").concat(e),n).then((function(e){return e.data}))},O=function(e){var n=e.message;return""===n?r.a.createElement(r.a.Fragment,null):null===n?null:n.includes("failed")?r.a.createElement("p",{className:"fail"},n):r.a.createElement("p",{className:"success"},n)},y=function(){Object(a.useEffect)((function(){console.log("effect"),E().then((function(e){console.log("promised fulfilled"),c(e)}))}),[]);var e=Object(a.useState)([]),n=Object(m.a)(e,2),t=n[0],c=n[1],o=Object(a.useState)(""),f=Object(m.a)(o,2),b=f[0],p=f[1],v=Object(a.useState)(""),y=Object(m.a)(v,2),S=y[0],k=y[1],N=Object(a.useState)(Object(i.a)(t)),C=Object(m.a)(N,2),F=C[0],T=C[1],I=Object(a.useState)(""),x=Object(m.a)(I,2),B=x[0],D=x[1],J=Object(a.useState)(""),L=Object(m.a)(J,2),W=L[0],A=L[1],M=Object(a.useState)(""),P=Object(m.a)(M,2),$=P[0],q=P[1],z=(""===B?t:F).map((function(e){return r.a.createElement("li",{className:"pudding",key:e.id},e.name," ",e.number,r.a.createElement("button",{type:"click",onClick:function(){return G(e.id)}},"remove"))})),G=function(e){var n=window.confirm("Are you sure you wish to delete your work of art?"),a=t.find((function(n){return n.id===e}));n?w(e).then((function(n){console.log("success: ",n),q("".concat(a.name," deleted")),setTimeout((function(){q(null)}),3e3),c(t.filter((function(n){return n.id!==e})))})):console.log("no changes made")};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(O,{message:$}),r.a.createElement(O,{message:W}),r.a.createElement(h,{handleSearch:function(e){D(e.target.value);var n=t.filter((function(n){return n.name.toLowerCase().includes(e.target.value.toLowerCase())}));T(n)}}),r.a.createElement("h2",null,"New entry"),r.a.createElement(d,{handleSubmit:function(e){e.preventDefault();var n,a=!1,r=!1,o=!1,i=Object(u.a)(t);try{for(i.s();!(n=i.n()).done;){var m=n.value;b===m.name&&m.number!==S?(a=!0,o=window.confirm("".concat(m.name," already exist in the phonebook. Change its phone number?"))):b===m.name&&(r=!0)}}catch(d){i.e(d)}finally{i.f()}if(a)if(o){var s=t.find((function(e){return e.name===b})),f=Object(l.a)(Object(l.a)({},s),{},{number:S});j(s.id,f).then((function(e){c(t.map((function(e){return e.name===s.name?f:e})))})).catch((function(e){A("".concat(s.name," is not part of the server!")),setTimeout((function(){A(null)}),3e3)}))}else console.log("No changes will be made to the phone number");else if(r)alert("".concat(b," has already been added")),console.log("Duplicate entry");else{g({name:b,number:S}).then((function(e){c(t.concat(e)),q("".concat(e.name," added")),setTimeout((function(){q(null)}),3e3)})).catch((function(e){var n=e.response.data.error;console.log("error: ",n),A(n),setTimeout((function(){A(null)}),3e3)})),p(""),k("")}},newName:b,handleInput:function(e){p(e.target.value)},newNumber:S,handleNumber:function(e){k(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(s,{displayFiltered:z}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(y,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},8:function(e,n,t){}},[[20,1,2]]]);
//# sourceMappingURL=main.4f236bd5.chunk.js.map